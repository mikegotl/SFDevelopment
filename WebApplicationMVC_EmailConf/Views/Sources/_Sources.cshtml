@model IEnumerable<WebApplicationMVC_EmailConf.Models.Source>
@using WebApplicationMVC_EmailConf.Models


<table class="table">
    <tr>
        <th>Credibility Score</th>
        <th>Type</th>
        <th>When</th>
        <th style="">Who</th>
        <th>What</th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
    <tr id="tr_@item.SourceID">
        <td>
            @Html.DisplayFor(modelItem => item.CredScore)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SourceType.Name)
        </td>
        <td id="td_when_@item.SourceID">
            @Html.DisplayFor(modelItem => item.When)
        </td>
        <td style="" id="td_who_@item.SourceID">
            @Html.DisplayFor(modelItem => item.Who)
        </td>
        <td>
            <div style="height:100px; overflow-y:auto" id="div_what_@item.SourceID">
                @Html.DisplayFor(modelItem => item.What)
            </div>
        </td>

        <td>
            @{
                    var target = string.Empty; ;
                    var type = item.SourceType.Name;
                    if (type == "Personal Research")
                    {
                        target = "PersonalEdit";
                    }
                    else
                    {
                        target = "PublishedEdit";
                    }
            }
            <button id="" class="btn btn-default" onclick="SetupEditModals(@item.SourceID);" data-toggle="modal" data-target="#@target">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </button>
            <button id="" class="btn btn-default" onclick="DeleteSource(@item.SourceID);">
                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
            </button>
        </td>
    </tr>
                    }
</table>
<input id="hidden_edit_sourceID" type="hidden" />
<!-- Modal Personal -->
<div class="modal fade" id="PersonalEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add Personal Source Reference</h4>
            </div>
            <div class="modal-body">

                <label class="">Date:</label>
                <input type="text" class="form-control" id="edit_source_date" name="source_date" />

                <label>Participants:</label>
                <input type="text" class="form-control" id="edit_participants" name="participants" />

                <label>What do you want your audience to know about this experience? </label>
                <textarea class="form-control" id="edit_what" name="what"></textarea>
                <br />
                <input type="button" onclick="EditPersonalSource();" class="btn btn-default" value="Save" data-dismiss="modal" />
                <label id="message_personal"></label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Published-->
<div class="modal fade" id="PublishedEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Edit Published Source Reference</h4>
            </div>
            <div class="modal-body">
                <span>
                    <label>Citation: </label> <a href="http://www.bibme.org/" target="_blank"> Click here for help creating citation. </a>
                </span>
                @*<input type="text" class="form-control" id="edit_citation" name="citation" placeholder="Paste your citation here" />*@
                <textarea class="form-control" id="edit_citation" name="citation" rows="3" placeholder="Paste your citation here"></textarea>
                <br />
                <textarea class="form-control" id="edit_published-what" name="what" rows="6" placeholder="Paste the information your will use in your speech"></textarea>
                <br />

                @*SUBMIT BUTTON*@
                <input type="button" onclick="EditPublishedSource();" class="btn btn-default" value="Save" data-dismiss="modal" />
                <label id="message_published"></label>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>